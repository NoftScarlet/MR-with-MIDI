(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(42),r=a.n(i),s=(a(51),a(3)),c=a(4),v=a(7),m=a(5),u=a(6),l=(a(52),a(53),a(110)),f=[{scoreID:"intervalCPositionBroken",scoreIDformatted:"intervalCPositionBroken",noteGroupFormatVariant:["C5=","C5=","C5=","C5=","C5=","C5=","C5="]},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:1e3,eventName:"blank screen",ptKeyName:"1",eventID:0},{score:" G G G|",imageSizeFactor:"1.2",staffWidth:"60",eventDuration:300,eventName:"Practice 1 shows on screen",eventID:0},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:1e3,eventName:"blank screen",eventID:0},{score:"G d G|",imageSizeFactor:"1.2",staffWidth:"60",eventDuration:500,eventName:"Practice 2 shows on screen",eventID:0},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:1e3,eventName:"blank screen",eventID:0},{score:"|G E G|",imageSizeFactor:"1.2",staffWidth:"60",eventDuration:3e3,eventName:"Practice 3 shows on screen",eventID:0},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:1e3,eventName:"blank screen",eventID:0},{eventID:-99},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:100,eventName:"blank screen",ptKeyName:"2",eventID:1},{score:"|C C C|",imageSizeFactor:"1.2",staffWidth:"60",eventDuration:300,eventName:"Test-1",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:100,eventName:"blank screen",eventID:2},{score:"|d d d|",imageSizeFactor:"1.2",staffWidth:"60",eventDuration:300,eventName:"Test-2",eventID:2},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:100,eventName:"blank screen",eventID:3},{score:-1,eventID:-99}],D=[{scoreID:"singleNoteCPosition",scoreIDformatted:"singleNoteCPosition",noteGroupFormatVariant:["","C4=E4=C4=","F4=","D4=","G4=","E4=","C4=","G4=","D4=","F4="]},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",ptKeyName:"1",eventID:1},{score:"y1/2C2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 1 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{score:"y1/2E2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 2 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{score:"y1/2C2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 3 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{eventID:-99},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",ptKeyName:"2",eventID:2},{score:"y1/2F2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-1",eventID:2},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:3},{score:"y1/2D2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-2",eventID:3},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:4},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-3",eventID:4},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:5},{score:"y1/2E2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-4",eventID:5},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:6},{score:"y1/2C2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-5",eventID:6},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:7},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-6",eventID:7},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:8},{score:"y1/2D2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-7",eventID:8},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:9},{score:"y1/2F2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-8",eventID:9},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:10},{score:-1,eventID:-99}],h=[{scoreID:"singleNoteGPosition",scoreIDformatted:"singleNoteGPosition",noteGroupFormatVariant:["","practice-G4=A4=G4=","B4=","G4=","C5=","A4=","C5=","G4=","D5=","B4="]},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",ptKeyName:"1",eventID:1},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 1 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{score:"y1/2A2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 2 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Practice 3 shows on screen",eventID:1},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:1},{eventID:-99},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",ptKeyName:"2",eventID:2},{score:"y1/2B2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-1",eventID:2},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:3},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-2",eventID:3},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:4},{score:"y1/2c2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-3",eventID:4},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:5},{score:"y1/2A2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-4",eventID:5},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:6},{score:"y1/2c2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-5",eventID:6},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:7},{score:"y1/2G2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-6",eventID:7},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:8},{score:"y1/2d2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-7",eventID:8},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:9},{score:"y1/2B2",imageSizeFactor:"1.6",staffWidth:"110",eventDuration:1e3,eventName:"Test-8",eventID:9},{score:"",imageSizeFactor:"",staffWidth:"",eventDuration:2e3,eventName:"blank screen",eventID:10},{score:-1,eventID:-99}],p=a(8),d=a(43),I=a.n(d),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(v.a)(this,Object(m.a)(t).call(this,e))).display=function(e,t,a){I.a.renderAbc("scoreLoopBundle",e,{scale:t,staffwidth:a})},a.display=a.display.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"display",style:{textAlign:"center",marginTop:"15%"}},this.display(this.props.score,this.props.imageSizeFactor,this.props.staffWidth),o.a.createElement("div",{id:"scoreLoopBundle"}))}}]),t}(o.a.Component),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(v.a)(this,Object(m.a)(t).call(this,e))).clearAsyncFunctions=function(){for(var e=a.timeoutID.length;e--;)window.clearTimeout(a.timeoutID[e]);a.setState({score:"",scoreIDformatted:""})},a.loopScoreSets=function(e,t,n,o){for(var i=parseInt(n),r=parseInt(o),s=function(t,n,o){a.timeoutID[o++]=setTimeout(function(){a.setState({score:e[t].score,imageSizeFactor:e[t].imageSizeFactor,staffWidth:e[t].staffWidth})},n),a.timeoutID[o++]=setTimeout(function(){a.setState({score:"",imageSizeFactor:"",staffWidth:""})},n+=e[t].eventDuration),v=n,m=o},c=i,v=0,m=0;c<i+r;c++)s(c,v,m)},a.loopScoreSets=a.loopScoreSets.bind(Object(p.a)(Object(p.a)(a))),a.timeoutID=[],a.state={score:"",imageSizeFactor:"1",staffWidth:"1",eventDuration:1,scoreIDformatted:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.participantID===e.participantID&&this.props.hoverShow===e.hoverShow}},{key:"componentDidUpdate",value:function(e,t,a){this.props!==e&&(!0===this.props.reset?(console.log("catch"),this.clearAsyncFunctions()):0!==this.props.midiEvent?console.log("midi, no re-rendering"):this.loopScoreSets(this.props.scoreSet,this.props.ptKeyName,this.props.loopLocation,this.props.loopLength))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(S,{score:this.state.score,imageSizeFactor:this.state.imageSizeFactor,staffWidth:this.state.staffWidth}))}}]),t}(o.a.Component),y=function(e,t,a){var n="data:text/csv;charset=utf-8,";e.forEach(function(e){var t=e.join(",");n+=t+"\r\n"});var o=encodeURI(n),i=document.createElement("a");i.download=t+"-"+a,i.href=o,i.click()},N=function(e,t,a,n,o,i){var r="",s="",c="please check manually",v="",m=n[e].length/3;return console.log(m),0===a[e].indexOf(n[e])?(c="1",r=t[e][m]-t[e][0],s=t[e][1]-t[e][0]):a[e].indexOf(n[e])>0?(c="2",v=a[e].indexOf(n[e])/3,r=t[e][v+m]-t[e][0],s=t[e][v+1]-t[e][0]):c="please check manually",[e-1+"Calculation","Calculate the result of previous trial","","","","","",i,n[e],a[e],c,v,r,s]},F=function(){var e=a(77)(new(a(81))("db.json"));e.defaults({posts:[],user:{},count:0}).write(),e.get("posts").push({id:1,title:"lowdb is awesome"}).write(),e.set("user.name","typicode").write(),e.update("count",function(e){return e+1}).write()},b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(v.a)(this,Object(m.a)(t).call(this,e))).initPlayeTimeAndNotesArray=function(e){F();for(var t=0;t<e+10;t++)a.playTimes.push([]),a.playedNotesArray.push([]),console.log(a.playedNotesArray)},a.clearAsyncFunctions=function(){for(var e=a.timeoutID.length;e--;)window.clearTimeout(a.timeoutID[e])},a.clearCSV=function(){a.playTimes=[[]],a.playedNotesArray=[[]],a.setState({csvData:[["Event ID and name: ","Behavior Name: ","Played Note: ","Velocity: ","Time(ms): ","Date: ","Participant ID","Test name","Notes shown on screen","Played notes","Case number","If case 2 - how many additional notes","if case 1 or case 2 - completion time","if case 1 or case 2 - initial response time"],[]]})},a.appendScoreSetData=function(e,t,n,o,i){for(var r=parseInt(o),s=parseInt(i),c=function(n,o,i){a.timeoutID[i++]=setTimeout(function(){""!==t[n].score&&setTimeout(function(){var n=a.state.csvData;n.push(N(a.eventID-1,a.playTimes,a.playedNotesArray,t[0].noteGroupFormatVariant,e,t[0].scoreID)),a.setState({csvData:n})},t[n+1].eventDuration),a.eventID=t[n].eventID,a.playTimes[a.eventID][0]=performance.now()-t[n].eventDuration;var r=a.state.csvData;r.push([t[n].eventName,t[n].score,"","",performance.now().toString(),Date(),e,t[0].scoreID]),a.setState({csvData:r}),-1===t[n+1].score&&setTimeout(function(){return y(a.state.csvData,a.props.participantID,t[0].scoreID),m=o,u=i,null},500)},o+=t[n].eventDuration),m=o,u=i},v=r,m=0,u=0;v<r+s;v++)c(v,m,u)},a.appendMIDIData=function(e){if(3===e.data.length&&(145===e.data[0]||144===e.data[0])&&0!==e.data[2]){var t=e.data[1],n=a.noteMap[t],o=["Play",e.data[0],n,e.data[2],performance.now().toString(),Date()],i=a.state.csvData;i.push(o),a.setState({csvData:i}),a.playedNotesArray[a.eventID]+=n;var r=a.playTimes[a.eventID];r.push(performance.now()),a.playTimes[a.eventID]=r}},a.recordData=function(e,t,n,o,i,r){r?(a.appendMIDIData(r),console.log(r)):a.appendScoreSetData(e,t,n,o,i)},a.timeoutID=[],a.eventID=0,a.playTimes=[[]],a.playedNotesArray=[[]],a.notes=["C1=","C1#","D1=","D1#","E1=","F1=","F1#","G1=","G1#","A1=","A1#","B1=","C2=","C2#","D2=","D2#","E2=","F2=","F2#","G2=","G2#","A2=","A2#","B2=","C3=","C3#","D3=","D3#","E3=","F3=","F3#","G3=","G3#","A3=","A3#","B3=","C4=","C4#","D4=","D4#","E4=","F4=","F4#","G4=","G4#","A4=","A4#","B4=","C5=","C5#","D5=","D5#","E5=","F5=","F5#","G5=","G5#","A5=","A5#","B5=","C6=","C6#","D6=","D6#","E6=","F6=","F6#","G6=","G6#","A6=","A6#","B6=","C7=","C7#","D7=","D7#","E7=","F7=","F7#","G7=","G7#","A7=","A7#","B7="],a.noteMap=[],a.notes.map(function(e,t){a.noteMap[t+24]=e}),a.state={csvData:[["Event ID and name: ","Behavior Name: ","Played Note: ","Velocity: ","Time(ms): ","Date: ","Participant ID","Test name","Notes shown on screen","Played notes","Case number","If case 2 - how many additional notes","if case 1 or case 2 - completion time","if case 1 or case 2 - initial response time"],[]]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.participantID===e.participantID&&this.props.hoverShow===e.hoverShow}},{key:"componentDidUpdate",value:function(e,t,a){this.props!==e&&(!0===this.props.reset?(console.log("clea true"),this.clearAsyncFunctions(),this.clearCSV()):(this.initPlayeTimeAndNotesArray(this.props.scoreSet.length),this.recordData(this.props.participantID,this.props.scoreSet,this.props.ptKeyName,this.props.loopLocation,this.props.loopLength,this.props.midiEvent)))}},{key:"render",value:function(){return o.a.createElement("div",{id:"eventRecorder"})}}]),t}(o.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(v.a)(this,Object(m.a)(t).call(this,e))).initMIDIAccess=function(){navigator.requestMIDIAccess().then(a.onSuccess,a.onFailure)},a.onSuccess=function(e){a.midi=e;var t=a.midi.inputs;t.size>0&&(t.values().next().value.onmidimessage=a.handleMIDIMessage)},a.onFailure=function(e){},a.scoreSetSwitcher=function(e){switch(a.setState({ptKeyName:"",scoreSet:[]}),a.reset=!0,e){case D[0].scoreIDformatted:a.scoreSetTemp=D;break;case h[0].scoreIDformatted:a.scoreSetTemp=h;break;case f[0].scoreIDformatted:a.scoreSetTemp=f;break;case"submitID":break;case"startNew":window.location.reload();break;case"resetCurrent":a.setState({ptKeyName:"",scoreSet:[]}),a.reset=!0}},a.handleMIDIMessage=function(e){a.setState({midiEvent:e})},a.handleMouseDown=function(e){a.scoreSetSwitcher(e.target.id)},a.handleKeyDown=function(e){a.reset=!1,"eee"===e.target.id&&"Enter"===e.key&&(e.preventDefault(),a.setState({showing:!1}));for(var t=function(t){if(a.scoreSetTemp[t].ptKeyName===e.key&&!a.keyLock){console.log("lock");var n=function(){for(var e=t+1;e<a.scoreSetTemp.length+1;e++)if(-99===a.scoreSetTemp[e].eventID)return e-t}();a.keyLock=!0,setTimeout(function(){a.keyLock=!1},3500),a.setState({ptKeyName:e.key,scoreSet:a.scoreSetTemp,loopLocation:t.toFixed(),loopLength:n.toFixed(),midiEvent:0})}},n=0;n<a.scoreSetTemp.length;n++)t(n)},a.scoreSetTemp=[],a.reset=!1,a.keyLock=!1,a.midi=0,a.initMIDIAccess(),a.state={ptKeyName:"",loopLocation:0,loopLength:0,scoreSet:[],midiEvent:0,participantID:"",inputValue:"",showing:!0,hoverShow:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateInputValue",value:function(e){this.setState({inputValue:e.target.value,participantID:e.target.value})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{style:{opacity:this.state.hoverShow?"1":"0"},onMouseEnter:function(){return e.setState({hoverShow:!0})},onMouseLeave:function(){return e.setState({hoverShow:!1})}},o.a.createElement(l.a,{color:"success",id:"startNew",onClick:this.handleMouseDown},"New Participant"),"\xa0",o.a.createElement(l.a,{color:"primary",id:f[0].scoreIDformatted,onClick:this.handleMouseDown},f[0].scoreID),"\xa0",o.a.createElement(l.a,{color:"primary",id:D[0].scoreIDformatted,onClick:this.handleMouseDown},D[0].scoreID),"\xa0",o.a.createElement(l.a,{color:"primary",id:h[0].scoreIDformatted,onClick:this.handleMouseDown},h[0].scoreID),"\xa0",o.a.createElement(l.a,{color:"secondary",id:"resetCurrent",onClick:this.handleMouseDown},"Reset Current Round"),o.a.createElement("br",null),o.a.createElement("div",null,"Current Participant: ",this.state.inputValue)),o.a.createElement("div",null,o.a.createElement(g,{hoverShow:this.state.hoverShow,participantID:this.state.participantID,scoreSet:this.state.scoreSet,ptKeyName:this.state.ptKeyName,loopLocation:this.state.loopLocation,loopLength:this.state.loopLength,reset:this.reset,midiEvent:this.state.midiEvent}),o.a.createElement(b,{hoverShow:this.state.hoverShow,participantID:this.state.participantID,scoreSet:this.state.scoreSet,ptKeyName:this.state.ptKeyName,loopLocation:this.state.loopLocation,loopLength:this.state.loopLength,reset:this.reset,midiEvent:this.state.midiEvent}),console.log("pass")),o.a.createElement("div",{style:{textAlign:"center",marginTop:"-25%",paddingTop:"25%",zIndex:"5",position:"relative",display:this.state.showing?"block":"none"}},o.a.createElement("form",null,o.a.createElement("label",null,"Please enter participant ID:",o.a.createElement("br",null),o.a.createElement("input",{id:"eee",type:"text",value:this.state.inputValue,onChange:function(t){return e.updateInputValue(t)}}))),o.a.createElement(l.a,{id:"submitID",color:"primary",style:{margin:"auto"},onClick:function(){return e.setState({showing:!1})}},"Submit")))}}]),t}(o.a.Component),w=function(e){function t(e){return Object(s.a)(this,t),Object(v.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("p",null)}}]),t}(o.a.Component),W=function(e){function t(e){return Object(s.a)(this,t),Object(v.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k,null),o.a.createElement(w,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("index.js loaded"),r.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},46:function(e,t,a){e.exports=a(108)},51:function(e,t,a){},52:function(e,t,a){},90:function(e,t){},92:function(e,t){}},[[46,1,2]]]);
//# sourceMappingURL=main.24481cb0.chunk.js.map